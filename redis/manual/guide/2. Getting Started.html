<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Getting Started 1.0.0.M8</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1.%20Introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2.%20Getting%20Started.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3.%20Object%20Mapping.html"><strong>3</strong><span>Object Mapping</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/4.%20Querying.html"><strong>4</strong><span>Querying</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/5.%20Transactions.html"><strong>5</strong><span>Transactions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/6.%20Redis%20Specific%20Extensions.html"><strong>6</strong><span>Redis Specific Extensions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/7.%20The%20Low-level%20API.html"><strong>7</strong><span>The Low-level API</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/8.%20Testing.html"><strong>8</strong><span>Testing</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/1.%20Introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/3.%20Object%20Mapping.html"><strong>3</strong><span>Object Mapping</span> >></a></div>
                


                <div class="project">
                    <h1>2 Getting Started - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Graeme Rocher</p>

                    <p><strong>Version:</strong> 1.0.0.M8</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#2.1%20Using%20Redis%20Standalone"><strong>2.1</strong><span>Using Redis Standalone</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#2.2%20Combining%20Redis%20and%20Hibernate"><strong>2.2</strong><span>Combining Redis and Hibernate</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="2. Getting Started">2 Getting Started</h1>
To get started with GORM for Redis you need to install the plugin into a Grails application:<p class="paragraph"/><div class="code"><pre>grails install&#45;plugin redis&#45;gorm</pre></div><p class="paragraph"/>With that done you need to set up a running Redis server. GORM for Redis requires Redis 2.0.0 or above which you can download at on the <a href="https://code.google.com/p/redis/downloads/list" target="blank">Redis download page</a>. Once downloaded extract the archive and run the following commands from the <code>redis-2.0.0</code> directory:<p class="paragraph"/><div class="code"><pre>make
./redis&#45;server</pre></div><p class="paragraph"/>With the above commands executed in a terminal window you should see output like the following appear:<p class="paragraph"/><div class="code"><pre>&#91;66243&#93; 03 Sep 17:35:12 &#42; Server started, Redis version 2.0.0
&#91;66243&#93; 03 Sep 17:35:12 &#42; DB loaded from disk: 0 seconds
&#91;66243&#93; 03 Sep 17:35:12 &#42; The server is now ready to accept connections on port 6379</pre></div><p class="paragraph"/>As you can see the server is running on port 6379, but don't worry the Redis plugin for Grails will automatically configure itself to look for Redis on that port by default.<p class="paragraph"/>If you want to configure how Grails connects to redis then you can do so using the following settings in <code>grails-app/conf/Config.groovy</code>:<p class="paragraph"/><div class="code"><pre>grails.'redis&#45;gorm'.host=<span class="java&#45;quote">"myserver"</span>
grails.'redis&#45;gorm'.port=6380
grails.'redis&#45;gorm'.password=<span class="java&#45;quote">"secret"</span>
grails.'redis&#45;gorm'.pooled=<span class="java&#45;keyword">true</span>
grails.'redis&#45;gorm'.resources=15
grails.'redis&#45;gorm'.timeout=5000</pre></div>



<h2 id="2.1 Using Redis Standalone">2.1 Using Redis Standalone</h2>
If you plan to use Redis as your primary datastore then you need to uninstall the Hibernate plugin:<p class="paragraph"/><div class="code"><pre>grails uninstall&#45;plugin hibernate</pre></div><p class="paragraph"/>With this done all domain classes in grails-app/domain will be persisted via Redis and not Hibernate. You can create a domain class by running the regular <code>create-domain-class</code> command:<p class="paragraph"/><div class="code"><pre>grails create&#45;domain&#45;class Person</pre></div><p class="paragraph"/>The <code>Person</code> domain class will automatically be a persistent entity that can be stored in Redis.


<h2 id="2.2 Combining Redis and Hibernate">2.2 Combining Redis and Hibernate</h2>
If you have both the Hibernate and Redis plugins installed then by default all classes in the <code>grails-app/domain</code> directory will be persisted by Hibernate and not Redis. If you want to persist a particular domain class with Redis then you must use the <code>mapWith</code> property in the domain class:<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">static</span> mapWith = <span class="java&#45;quote">"redis"</span></pre></div><p class="paragraph"/>Alternatively you can persist Hibernate entities to Redis using the special <code>redis</code> scope added to all Hibernate entities:<p class="paragraph"/><div class="code"><pre>def hibernatePerson = Person.get(1)<p class="paragraph"/>hibernatePerson.redis.save()<p class="paragraph"/>def redisPerson = Person.redis.get(1)</pre></div><p class="paragraph"/>This makes it really easy to use Redis as a cache for Hibernate entities and take advantage of some nice Redis features like randomization:<p class="paragraph"/><div class="code"><pre>def people = Person.list()
people.each &#123; person &#45;&#62; person.redis.save() &#125;<p class="paragraph"/>def randomRedisPerson = Person.redis.random()</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/1.%20Introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/3.%20Object%20Mapping.html"><strong>3</strong><span>Object Mapping</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Beans</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Beans/redis.html">redis</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Classes</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/expire.html">expire</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/pop.html">pop</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Domain%20Classes/random.html">random</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Testing</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Testing/DatastoreUnitTestMixin.html">DatastoreUnitTestMixin</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
